# Vermont 12x18" Print Map
# Full regional map with Vermont towns colored by county, surrounding states,
# Lake Champlain with islands, water cutouts, and major highways.
#
# This recipe recreates the vt-geodata project's vermont_12x18 map:
# - Vermont 256 towns with water cutouts
# - Neighboring states (NY, NH, MA, ME) for regional context
# - Lake Champlain and other water bodies
# - Interstate and US highway network
# - Optimized for pen plotter output

name: vermont_12x18
description: Vermont regional map with 256 towns, water features, roads, and neighboring states
version: 1

sources:
  # Vermont towns (county subdivisions) - 256 towns/cities
  vt_towns:
    uri: census:tiger/2023/vt/cousub
    description: Vermont county subdivisions (256 towns/cities)

  # Vermont water bodies (merged from all counties)
  vt_water:
    uri: census:tiger/2023/vt/areawater
    description: Vermont lakes, ponds, reservoirs

  # Vermont primary and secondary roads (includes interstates, US routes, state routes)
  vt_roads:
    uri: census:tiger/2023/vt/prisecroads
    description: Vermont primary and secondary roads

  # Neighboring state towns for regional context
  ny_towns:
    uri: census:tiger/2023/ny/cousub
    description: New York county subdivisions (Champlain-adjacent counties)

  nh_towns:
    uri: census:tiger/2023/nh/cousub
    description: New Hampshire county subdivisions

  ma_towns:
    uri: census:tiger/2023/ma/cousub
    description: Massachusetts county subdivisions

  me_towns:
    uri: census:tiger/2023/me/cousub
    description: Maine county subdivisions

  # Roads for neighboring states
  ny_roads:
    uri: census:tiger/2023/ny/prisecroads
    description: New York primary and secondary roads

  nh_roads:
    uri: census:tiger/2023/nh/prisecroads
    description: New Hampshire primary and secondary roads

  ma_roads:
    uri: census:tiger/2023/ma/prisecroads
    description: Massachusetts primary and secondary roads

  # Water for neighboring states (for cutouts)
  ny_water:
    uri: census:tiger/2023/ny/areawater
    description: New York water bodies

  nh_water:
    uri: census:tiger/2023/nh/areawater
    description: New Hampshire water bodies

  ma_water:
    uri: census:tiger/2023/ma/areawater
    description: Massachusetts water bodies

layers:
  # Layer 1: New York regional background
  - name: ny_background
    source: ny_towns
    operations:
      - type: subtract
        target: ny_water
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#8a9bab"
      stroke_width: 0.3
      fill: none
    order: 1

  # Layer 2: New Hampshire regional background
  - name: nh_background
    source: nh_towns
    operations:
      - type: subtract
        target: nh_water
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#9e9e9e"
      stroke_width: 0.3
      fill: none
    order: 2

  # Layer 3: Massachusetts regional background
  - name: ma_background
    source: ma_towns
    operations:
      - type: subtract
        target: ma_water
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#a89888"
      stroke_width: 0.3
      fill: none
    order: 3

  # Layer 4: Maine regional background
  - name: me_background
    source: me_towns
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#8aa898"
      stroke_width: 0.3
      fill: none
    order: 4

  # Layer 5: Major water bodies (Lake Champlain, etc.)
  - name: major_water
    source: vt_water
    operations:
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#1565c0"
      stroke_width: 0.5
      fill: none
    order: 5

  # Layer 6: Vermont towns with water cutouts, colored by county
  - name: vt_towns
    source: vt_towns
    operations:
      - type: subtract
        target: vt_water
      - type: simplify
        tolerance: 0.0001
        preserve_topology: true
    style:
      stroke: "#424242"
      stroke_width: 0.5
      fill: "#e0e0e0"  # Base fill (used if county not in color_map)
      fill_by: COUNTYFP  # Color by county FIPS code
      color_map:
        "001": "#a5d6a7"  # Addison - light green
        "003": "#90caf9"  # Bennington - light blue
        "005": "#ffcc80"  # Caledonia - orange
        "007": "#ce93d8"  # Chittenden - purple
        "009": "#80deea"  # Essex - cyan
        "011": "#fff59d"  # Franklin - yellow
        "013": "#ef9a9a"  # Grand Isle - red
        "015": "#c5e1a5"  # Lamoille - lime
        "017": "#b39ddb"  # Orange - deep purple
        "019": "#ffab91"  # Orleans - deep orange
        "021": "#81d4fa"  # Rutland - light blue
        "023": "#a5d6a7"  # Washington - green
        "025": "#ffe082"  # Windham - amber
        "027": "#f48fb1"  # Windsor - pink
    order: 6

  # Layer 7: Regional roads (all states combined, drawn on top)
  - name: regional_roads
    source: [vt_roads, ny_roads, nh_roads, ma_roads]
    operations:
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#616161"
      stroke_width: 0.4
      fill: none
    order: 7

output:
  # Vermont bounding box with regional context
  # Matches vt-geodata: [-73.9293, 42.4271, -71.1694, 45.4050]
  bounds: [-73.93, 42.43, -71.17, 45.41]
  projection: epsg:4326

  formats:
    # SVG for pen plotters - 12x18 inch tabloid
    - type: svg
      quality:
        - name: ultra_fine
          simplify: 0.0001
        - name: fine
          simplify: 0.0005
        - name: medium
          simplify: 0.001
      options:
        per_layer: true
        combined: true
        optimize_for: plotter
        page_size: [12, 18]
        margin: 0.5

    # GeoJSON for web viewing and analysis
    - type: geojson
      options:
        per_layer: true
        precision: 6
