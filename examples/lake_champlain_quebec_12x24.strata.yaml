# Lake Champlain Regional Map with Quebec
# Extends north to show Quebec municipalities along the US-Canada border
# Demonstrates tri-national data integration: VT, NY, and Quebec
#
# Optimized for pen plotter output

name: lake_champlain_quebec_12x24
description: Lake Champlain region including Quebec municipalities
version: 1

sources:
  # Vermont towns
  vt_towns:
    uri: census:tiger/2023/vt/cousub
    description: Vermont county subdivisions

  # New York towns
  ny_towns:
    uri: census:tiger/2023/ny/cousub
    description: New York county subdivisions

  # Quebec municipalities
  quebec_muni:
    uri: quebec:municipalities
    description: Quebec municipal boundaries

  # Lake Champlain
  lake_champlain_vt:
    uri: census:tiger/2023/vt/areawater
    description: Lake Champlain (VT portion)
    filter:
      FULLNAME_contains: Champlain

  lake_champlain_ny:
    uri: census:tiger/2023/ny/areawater
    description: Lake Champlain (NY portion)
    filter:
      FULLNAME_contains: Champlain

  # Water bodies for cutouts
  vt_water:
    uri: census:tiger/2023/vt/areawater
    description: Vermont water bodies

  ny_water:
    uri: census:tiger/2023/ny/areawater
    description: New York water bodies

  # Roads
  vt_interstates:
    uri: census:tiger/2023/vt/prisecroads
    filter:
      RTTYP: "I"

  ny_interstates:
    uri: census:tiger/2023/ny/prisecroads
    filter:
      RTTYP: "I"

  vt_us_routes:
    uri: census:tiger/2023/vt/prisecroads
    filter:
      RTTYP: "U"

  ny_us_routes:
    uri: census:tiger/2023/ny/prisecroads
    filter:
      RTTYP: "U"

layers:
  # Layer 1: Quebec municipalities (northern border)
  - name: quebec_muni
    source: quebec_muni
    operations:
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#7986cb"
      stroke_width: 0.4
      fill: "#e8eaf6"
      vary_fill: true
    order: 1

  # Layer 2: New York towns
  - name: ny_towns
    source: ny_towns
    operations:
      - type: subtract
        target: ny_water
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#8a9bab"
      stroke_width: 0.4
      fill: "#eceff1"
      vary_fill: true
    order: 2

  # Layer 3: Vermont towns
  - name: vt_towns
    source: vt_towns
    operations:
      - type: subtract
        target: vt_water
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#424242"
      stroke_width: 0.5
      fill: "#e8f5e9"
      vary_fill: true
    order: 3

  # Layer 4: Lake Champlain
  - name: lake_champlain
    source: [lake_champlain_vt, lake_champlain_ny]
    operations:
      - type: merge
      - type: clean
      - type: remove_holes
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#0d47a1"
      stroke_width: 0.6
      fill: "#bbdefb"
    order: 4

  # Layer 5: US routes
  - name: us_routes
    source: [vt_us_routes, ny_us_routes]
    operations:
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#1976d2"
      stroke_width: 0.5
      fill: none
    order: 5

  # Layer 6: Interstates
  - name: interstates
    source: [vt_interstates, ny_interstates]
    operations:
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#d32f2f"
      stroke_width: 0.7
      fill: none
    order: 6

output:
  # Extended bounds to include Quebec (45.2 -> 45.5 north)
  bounds: [-73.84, 43.50, -72.40, 45.50]
  projection: epsg:4326

  formats:
    - type: svg
      quality:
        - name: fine
          simplify: 0.0002
        - name: medium
          simplify: 0.0005
      options:
        per_layer: true
        combined: true
        page_size: [12, 24]
        margin: 0.5

    - type: geojson
      options:
        per_layer: true
        precision: 6
