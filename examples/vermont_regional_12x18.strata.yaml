# Vermont Regional Map - Full State 12x18"
# Feature parity with vt-geodata generate_plotter_svgs.py
# Includes: VT, NY, NH, MA, ME, Quebec
#
# Layer stack matching vt-geodata SHARED_LAYERS:
#   1-5:   Regional backgrounds (quebec, ny, nh, ma, me)
#   6-9:   Major water bodies (lake_champlain, memphremagog, missisquoi)
#   10-15: Town boundaries with water cutouts
#   16-21: Regional hydro (filtered by min_area_km2: 0.5)
#   22-25: Highways (state, quebec, US, interstates)
#
# Optimized for pen plotter output
# Water bodies filtered to >= 0.5 sq km to reduce tiny lakes

name: vermont_regional_12x18
description: Vermont and surrounding region with water cutouts
version: 1

sources:
  # ===== Regional Backgrounds (Counties) =====
  quebec_mrc:
    uri: quebec:mrc
    description: Quebec MRC boundaries (background)

  ny_counties:
    uri: census:tiger/2023/ny/county
    description: New York county boundaries

  nh_counties:
    uri: census:tiger/2023/nh/county
    description: New Hampshire county boundaries

  ma_counties:
    uri: census:tiger/2023/ma/county
    description: Massachusetts county boundaries

  me_counties:
    uri: census:tiger/2023/me/county
    description: Maine county boundaries

  # ===== Town Subdivisions =====
  quebec_muni:
    uri: quebec:municipalities
    description: Quebec municipal boundaries

  ny_towns:
    uri: census:tiger/2023/ny/cousub
    description: New York county subdivisions

  nh_towns:
    uri: census:tiger/2023/nh/cousub
    description: New Hampshire county subdivisions

  ma_towns:
    uri: census:tiger/2023/ma/cousub
    description: Massachusetts county subdivisions

  me_towns:
    uri: census:tiger/2023/me/cousub
    description: Maine county subdivisions

  vt_towns:
    uri: census:tiger/2023/vt/cousub
    description: Vermont county subdivisions

  # ===== Water Bodies =====
  # Lake Champlain (VT + NY portions)
  lake_champlain_vt:
    uri: census:tiger/2023/vt/areawater
    description: Lake Champlain (VT portion)
    filter:
      FULLNAME_contains: Champlain

  lake_champlain_ny:
    uri: census:tiger/2023/ny/areawater
    description: Lake Champlain (NY portion)
    filter:
      FULLNAME_contains: Champlain

  # Regional water for cutouts
  vt_water:
    uri: census:tiger/2023/vt/areawater
    description: Vermont water bodies

  ny_water:
    uri: census:tiger/2023/ny/areawater
    description: New York water bodies

  nh_water:
    uri: census:tiger/2023/nh/areawater
    description: New Hampshire water bodies

  ma_water:
    uri: census:tiger/2023/ma/areawater
    description: Massachusetts water bodies

  # Quebec hydro from CanVec (Natural Resources Canada)
  quebec_hydro:
    uri: canada:canvec/hydro
    description: Quebec lakes and water bodies from CanVec 1M

  # Quebec highways from Statistics Canada NRN
  quebec_roads:
    uri: canada:nrn/qc
    description: Quebec road network (highways)

  # ===== Roads =====
  vt_roads:
    uri: census:tiger/2023/vt/prisecroads
    description: Vermont primary/secondary roads

  ny_roads:
    uri: census:tiger/2023/ny/prisecroads
    description: New York primary/secondary roads

  nh_roads:
    uri: census:tiger/2023/nh/prisecroads
    description: New Hampshire primary/secondary roads

  ma_roads:
    uri: census:tiger/2023/ma/prisecroads
    description: Massachusetts primary/secondary roads

layers:
  # ===== Layer 1-5: Regional Backgrounds =====
  - name: quebec_background
    source: quebec_mrc
    operations:
      - type: simplify
        tolerance: 0.001
    style:
      stroke: "#c9b99a"
      stroke_width: 0.5
      fill: "#f5ebe0"
    order: 1

  - name: ny_background
    source: ny_counties
    operations:
      - type: simplify
        tolerance: 0.001
    style:
      stroke: "#8a9bab"
      stroke_width: 0.75
      fill: "#e3e8ed"
    order: 2

  - name: nh_background
    source: nh_counties
    operations:
      - type: simplify
        tolerance: 0.001
    style:
      stroke: "#9e9e9e"
      stroke_width: 0.75
      fill: "#e8e8e8"
    order: 3

  - name: ma_background
    source: ma_counties
    operations:
      - type: simplify
        tolerance: 0.001
    style:
      stroke: "#a89888"
      stroke_width: 0.75
      fill: "#ede5dc"
    order: 4

  - name: me_background
    source: me_counties
    operations:
      - type: simplify
        tolerance: 0.001
    style:
      stroke: "#8aa898"
      stroke_width: 0.75
      fill: "#e0e8e4"
    order: 5

  # ===== Layer 6: Lake Champlain (major water body) =====
  - name: lake_champlain
    source: [lake_champlain_vt, lake_champlain_ny]
    operations:
      - type: merge
      - type: clean
      - type: remove_holes
        min_area_km2: 0.5
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#0d47a1"
      stroke_width: 0.5
      fill: "#1565c0"
    order: 6

  # ===== Layer 7-11: Town boundaries with water cutouts =====
  - name: quebec_municipalities
    source: quebec_muni
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#c9b99a"
      stroke_width: 0.3
      fill: none
    order: 7

  - name: ny_towns
    source: ny_towns
    operations:
      - type: subtract
        target: ny_water
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#8a9bab"
      stroke_width: 0.3
      fill: none
    order: 8

  - name: nh_towns
    source: nh_towns
    operations:
      - type: subtract
        target: nh_water
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#9e9e9e"
      stroke_width: 0.3
      fill: none
    order: 9

  - name: ma_towns
    source: ma_towns
    operations:
      - type: subtract
        target: ma_water
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#a89888"
      stroke_width: 0.3
      fill: none
    order: 10

  - name: me_towns
    source: me_towns
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#8aa898"
      stroke_width: 0.3
      fill: none
    order: 11

  - name: vt_towns
    source: vt_towns
    operations:
      - type: subtract
        target: vt_water
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#424242"
      stroke_width: 0.5
      fill: "#e8f5e9"
      vary_fill: true
    order: 12

  # ===== Layer 13-18: Regional water (shows through cutouts) =====
  # All water layers filtered to >= 0.5 sq km to reduce tiny lakes
  - name: ny_water
    source: ny_water
    filter:
      min_area_km2: 0.5
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#1976d2"
      stroke_width: 0.5
      fill: "#64b5f6"
    order: 13

  - name: nh_water
    source: nh_water
    filter:
      min_area_km2: 0.5
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#1976d2"
      stroke_width: 0.5
      fill: "#64b5f6"
    order: 14

  - name: ma_water
    source: ma_water
    filter:
      min_area_km2: 0.5
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#1976d2"
      stroke_width: 0.5
      fill: "#64b5f6"
    order: 15

  - name: vt_water
    source: vt_water
    filter:
      min_area_km2: 0.5
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#1976d2"
      stroke_width: 0.5
      fill: "#64b5f6"
    order: 16

  - name: quebec_lakes
    source: quebec_hydro
    filter:
      min_area_km2: 0.5
    operations:
      - type: simplify
        tolerance: 0.0005
    style:
      stroke: "#1976d2"
      stroke_width: 0.5
      fill: "#64b5f6"
    order: 17

  # ===== Layer 18-22: Regional Roads =====
  - name: state_routes
    source: [vt_roads, ny_roads, nh_roads, ma_roads]
    operations:
      - type: simplify
        tolerance: 0.0003
    filter:
      RTTYP: "S"
    style:
      stroke: "#616161"
      stroke_width: 0.5
      fill: none
    order: 18

  # Quebec highways (Autoroutes) from NRN - filter for major roads
  - name: quebec_highways
    source: quebec_roads
    filter:
      ROADCLASS: "Freeway"  # Autoroutes only (major highways)
    operations:
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#424242"
      stroke_width: 0.75
      fill: none
    order: 19

  - name: us_highways
    source: [vt_roads, ny_roads, nh_roads, ma_roads]
    operations:
      - type: simplify
        tolerance: 0.0003
    filter:
      RTTYP: "U"
    style:
      stroke: "#1976d2"
      stroke_width: 0.75
      fill: none
    order: 20

  - name: interstates
    source: [vt_roads, ny_roads, nh_roads, ma_roads]
    operations:
      - type: simplify
        tolerance: 0.0003
    filter:
      RTTYP: "I"
    style:
      stroke: "#d32f2f"
      stroke_width: 1.0
      fill: none
    order: 21

output:
  # Vermont full state bounds (matching vt-geodata PRINT_CONFIGS)
  bounds: [-73.9293, 42.4271, -71.1694, 45.4050]
  projection: epsg:4326

  formats:
    - type: svg
      quality:
        - name: ultra_fine
          simplify: 0.0001
        - name: fine
          simplify: 0.0005
        - name: medium
          simplify: 0.001
      options:
        per_layer: true
        combined: true
        page_size: [12, 18]
        margin: 0.5

    - type: geojson
      options:
        per_layer: true
        precision: 6
