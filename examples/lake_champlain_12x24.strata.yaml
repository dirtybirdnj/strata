# Lake Champlain 12x24" Print Map
# Focused view of Lake Champlain showing Vermont and New York shorelines,
# town boundaries with water cutouts, and the lake's island geography.
#
# This recipe recreates the vt-geodata project's lake_champlain_12x24 map:
# - Lake Champlain with all islands visible
# - Vermont and New York towns along the shoreline
# - Water cutouts showing lake shoreline detail
# - Interstate and US highway network with road classification
# - Taller aspect ratio (1:2) for the north-south lake orientation
# - Optimized for pen plotter output

name: lake_champlain_12x24
description: Lake Champlain focused map showing VT/NY shorelines and islands
version: 1

sources:
  # Vermont towns (county subdivisions)
  vt_towns:
    uri: census:tiger/2023/vt/cousub
    description: Vermont county subdivisions

  # New York towns (Champlain-adjacent counties only)
  ny_towns:
    uri: census:tiger/2023/ny/cousub
    description: New York county subdivisions (Clinton, Essex, Franklin, Warren, Washington)

  # Lake Champlain only (filtered by name)
  lake_champlain_vt:
    uri: census:tiger/2023/vt/areawater
    description: Lake Champlain (VT portion)
    filter:
      FULLNAME_contains: Champlain

  lake_champlain_ny:
    uri: census:tiger/2023/ny/areawater
    description: Lake Champlain (NY portion)
    filter:
      FULLNAME_contains: Champlain

  # All Vermont water bodies (for town cutouts)
  vt_water:
    uri: census:tiger/2023/vt/areawater
    description: Vermont lakes, ponds, reservoirs

  # All New York water bodies (for town cutouts)
  ny_water:
    uri: census:tiger/2023/ny/areawater
    description: New York water bodies

  # Interstate roads (RTTYP = I)
  vt_interstates:
    uri: census:tiger/2023/vt/prisecroads
    description: Vermont interstate highways
    filter:
      RTTYP: "I"

  ny_interstates:
    uri: census:tiger/2023/ny/prisecroads
    description: New York interstate highways
    filter:
      RTTYP: "I"

  # US highways (RTTYP = U)
  vt_us_routes:
    uri: census:tiger/2023/vt/prisecroads
    description: Vermont US routes
    filter:
      RTTYP: "U"

  ny_us_routes:
    uri: census:tiger/2023/ny/prisecroads
    description: New York US routes
    filter:
      RTTYP: "U"

  # State routes (RTTYP = S)
  vt_state_routes:
    uri: census:tiger/2023/vt/prisecroads
    description: Vermont state routes
    filter:
      RTTYP: "S"

  ny_state_routes:
    uri: census:tiger/2023/ny/prisecroads
    description: New York state routes
    filter:
      RTTYP: "S"

  # Rivers and streams (linear water)
  vt_rivers:
    uri: census:tiger/2023/vt/linearwater
    description: Vermont rivers and streams

  ny_rivers:
    uri: census:tiger/2023/ny/linearwater
    description: New York rivers and streams

layers:
  # Layer 1: New York towns with water cutouts (western shore)
  - name: ny_towns
    source: ny_towns
    operations:
      - type: subtract
        target: ny_water
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#8a9bab"
      stroke_width: 0.4
      fill: none
    order: 1

  # Layer 2: Vermont towns with water cutouts (eastern shore)
  - name: vt_towns
    source: vt_towns
    operations:
      - type: subtract
        target: vt_water
      - type: simplify
        tolerance: 0.0002
        preserve_topology: true
    style:
      stroke: "#424242"
      stroke_width: 0.5
      fill: none
    order: 2

  # Layer 3: Lake Champlain (filtered - just the lake, not all water)
  - name: lake_champlain
    source: [lake_champlain_vt, lake_champlain_ny]
    operations:
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#0d47a1"
      stroke_width: 0.6
      fill: none
    order: 3

  # Layer 4: Rivers and streams
  - name: rivers
    source: [vt_rivers, ny_rivers]
    operations:
      - type: simplify
        tolerance: 0.0003
    style:
      stroke: "#42a5f5"
      stroke_width: 0.25
      fill: none
    order: 4

  # Layer 5: State routes (lowest road hierarchy, gray)
  - name: state_routes
    source: [vt_state_routes, ny_state_routes]
    operations:
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#9e9e9e"
      stroke_width: 0.3
      fill: none
    order: 5

  # Layer 6: US highways (medium hierarchy, blue)
  - name: us_routes
    source: [vt_us_routes, ny_us_routes]
    operations:
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#1976d2"
      stroke_width: 0.5
      fill: none
    order: 6

  # Layer 7: Interstate highways (highest hierarchy, red)
  - name: interstates
    source: [vt_interstates, ny_interstates]
    operations:
      - type: simplify
        tolerance: 0.0002
    style:
      stroke: "#d32f2f"
      stroke_width: 0.7
      fill: none
    order: 7

output:
  # Lake Champlain focused bounds (taller aspect ratio for N-S orientation)
  # Matches vt-geodata: [-73.84, 43.5, -72.66, 45.2]
  bounds: [-73.84, 43.50, -72.66, 45.20]
  projection: epsg:4326

  formats:
    # SVG for pen plotters - 12x24 inch (1:2 aspect ratio)
    - type: svg
      quality:
        - name: ultra_fine
          simplify: 0.0001
        - name: fine
          simplify: 0.0003
        - name: medium
          simplify: 0.0007
      options:
        per_layer: true
        combined: true
        optimize_for: plotter
        page_size: [12, 24]
        margin: 0.5

    # GeoJSON for web viewing and analysis
    - type: geojson
      options:
        per_layer: true
        precision: 6
